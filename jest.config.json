{
  "testEnvironment": "node",
  "rootDir": ".",
  "moduleFileExtensions": ["ts", "tsx", "js"],
  "moduleDirectories": ["node_modules"],
  "testPathIgnorePatterns": ["/node_modules/", "/dist/", "/.esbuild/"],
  "setupFiles": ["./jest.env.variables"],
  "testRegex": "^(?!.*integration\\.).*spec\\.ts.*$",
  "verbose": true,
  "transform": {
    "\\.tsx?$": [
      "ts-jest",
      {
        "tsconfig": "./tsconfig.json",
        "diagnostics": true
      }
    ]
  },
  "coverageDirectory": "./coverage",
  "moduleNameMapper": {
    "^~app$": "<rootDir>/src/app/index.ts",
    "^~app/(.*)$": "<rootDir>/src/app/$1",
    "^@shared$": "<rootDir>/src/app/shared/index.ts",
    "^@shared/(.*)$": "<rootDir>/src/app/shared/$1",
    "^@core$": "<rootDir>/src/app/core/index.ts",
    "^@core/(.*)$": "<rootDir>/src/app/core/$1",
    "^@test$": "<rootDir>/src/app/test/index.ts",
    "^@test/(.*)$": "<rootDir>/src/app/test/$1"
  },
  "collectCoverageFrom": [
    "<rootDir>/**/*.{ts,tsx}",
    "!<rootDir>/node_modules/",
    "!<rootDir>/**/*.module.ts",
    "!<rootDir>/**/index.ts",
    "!<rootDir>/src/main.ts",
    "!<rootDir>/xmigrate.ts",
    "!<rootDir>/src/app/core/middlewares/print-routes/*.{ts,tsx}",
    "!<rootDir>/src/app/storage/buckets/migration/*.{ts,tsx}",
    "!<rootDir>/migrations/*.{ts,tsx}"
  ],
  "coverageThreshold": {
    "global": {
      "branches": 65,
      "functions": 70,
      "lines": 80,
      "statements": 80
    }
  }
}
